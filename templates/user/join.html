{% load static%}

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- google icons-->
  </head>

  <body style="background:#FAFAFA;">
    <div style="display:flex; flex-direction:column; align-items:center; text-align:center; width:100%;">
      <div style="padding:20px; border:solid 2px rgb(219,219,219,1); width:300px;height:400px; margin-top:30px; background:white;">
        <div>
          <img src="{% static 'img/instar.jpeg'%}" style="width:200px;"/>
        </div>
        <div style="font-weight:bold; color:gray; margin:10px 0px;">친구들고ㅓㅏ사진 동여상ㅂ가입</div>
        <div>
          <div class="form-floating mb-3">
            <input type="email" class="form-control" style="font-size:14px; height:24px;" id="input_email" placeholder="name@example.com">
            <label for="input_email" style="font-size:14px; padding:4px 10px;">이메일 주소</label>
          </div>
        </div>
        <div>
          <div class="form-floating mb-3">
            <input type="email" class="form-control" style="font-size:14px; height:24px;" id="input_name" placeholder="name@example.com">
            <label for="input_name" style="font-size:14px; padding:4px 10px;">이름</label>
          </div>
        </div>
        <div>
          <div class="form-floating mb-3">
            <input type="email" class="form-control" style="font-size:14px; height:24px;" id="input_nickname" placeholder="name@example.com">
            <label for="input_nickname" style="font-size:14px; padding:4px 10px;">닉네임</label>
          </div>
        </div>
        <div class="">
          <div class="form-floating">
            <input type="password" class="form-control" style="font-size:14px; height:24px;" id="input_password" placeholder="Password">
            <label for="input_password" style="font-size:14px; padding:4px 10px;">패스워드</label>
          </div>
        </div>
        <button id="join_button" style="margin:10px 0; width:100%;" type="button" class="btn btn-primary">가입버튼</button>
      </div>
      <div style="padding:20px; border:solid 2px rgb(219,219,219,1); width:300px; height:70px; margin-top:30px; background:white;">
        <div>계정이 있으신가요?
          <a href="login">로그인</a>
        </div>
      </div>
    </div>

  </body>

</html>

<script src="{% static 'jquery.min.js' %}"></script>
<!-- bootstrap-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

<script>
  //회원가입 로직은 동일함 !
  $('#join_button').click(function () {

    // 값들을 jquery로 받아주기
    let email = $('#input_email').val()
    let password = $('#input_password').val()
    let nickname = $('#input_nickname').val()
    let name = $('#input_name').val()

    console.log(email, password, nickname, name)

    $.ajax({
      url: '/user/join',
      // json으로 데이터를 받자
      data: {
        email: email,
        password: password,
        nickname: nickname,
        name: name
      },
      method: "POST",
      dataType: 'json',
      success: function (data) {
        console.log('성공');
      },
      error: function (request, status, error) {
        console.log('에러');
      },
      complete: function () {
        console.log('완료')
        //모달 닫아주기 or 메인으로 다시가는거(페이지 새로고침)
        location.replace("/")
      }
    })
  });
</script>